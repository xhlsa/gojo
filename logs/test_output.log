==============================================================================
EKF vs Complementary Filter Test - Robust Sensor Initialization
Session started: Wed Nov 12 05:15:28 UTC 2025
Test arguments: 1
Log file: crash_logs/test_ekf_2025-11-11_22-15-28.log
==============================================================================
[1;33mAcquiring wakelock...[0m
[0;32m‚úì Wakelock acquired[0m

[1;33mSensor initialization attempt 1/3[0m
[1;33mCleaning up sensor processes...[0m
[0;32m‚úì Sensor cleanup complete[0m
[1;33mValidating accelerometer access...[0m
[0;31m‚úó Accelerometer validation failed[0m
[0;31mOutput received:[0m
Terminated                 /data/data/com.termux/files/usr/libexec/termux-api Sensor "$@"
Caught interrupt.. Finishing...
Performing sensor cleanup
Sensor cleanup successful!
[1;33mRetrying in 3 seconds...[0m

[1;33mSensor initialization attempt 2/3[0m
[1;33mCleaning up sensor processes...[0m
[0;32m‚úì Sensor cleanup complete[0m
[1;33mValidating accelerometer access...[0m
[0;32m‚úì Accelerometer responding correctly[0m

[1;33mGPS initialization attempt 1/3[0m
[1;33mCleaning up GPS processes...[0m
[0;32m‚úì GPS cleanup complete[0m
[1;33mValidating GPS API service...[0m
[0;32m‚úì GPS API responding correctly[0m

[0;32m‚úì Sensor ready, starting test in 2 seconds...[0m
[0;32mStarting Python test...[0m

[GyroDaemon] Starting shared queue reader
[GyroDaemon] Accel daemon alive: True
[GyroDaemon] Shared sample #1: x=0.0000
[GyroDaemon] Shared sample #2: x=0.0000
[GyroDaemon] Shared sample #3: x=-0.0002
[GyroDaemon] Shared sample #4: x=-0.0002
[GyroDaemon] Shared sample #5: x=-0.0002
[GYRO] First sample received: ['x', 'y', 'z', 'timestamp']

[DEBUG] Test start time: 1762924559.6642678, End time target: 1762924623.3746743, Duration: 1 min (60 sec)
[00:03] STATUS: Memory=92.5MB (peak=92.5MB) | GPS=   1 (ALIVE) | Accel=   31 (ALIVE) | Gyro=    1

‚ö†Ô∏è ACCEL SILENT for 6.0s - triggering auto-restart
  ‚Üí Accel already alive (concurrent restart won)
  ‚úì Accel restarted, resuming data collection

‚ö†Ô∏è ACCEL SILENT for 6.0s - triggering auto-restart
  ‚Üí Accel already alive (concurrent restart won)
  ‚úì Accel restarted, resuming data collection

‚ö†Ô∏è ACCEL SILENT for 6.0s - triggering auto-restart
  ‚Üí Accel already alive (concurrent restart won)
  ‚úì Accel restarted, resuming data collection

‚ö†Ô∏è ACCEL SILENT for 6.0s - triggering auto-restart
  ‚Üí Accel already alive (concurrent restart won)
  ‚úì Accel restarted, resuming data collection

‚ö†Ô∏è ACCEL SILENT for 6.0s - triggering auto-restart
  ‚Üí Accel already alive (concurrent restart won)
  ‚úì Accel restarted, resuming data collection

‚ö†Ô∏è ACCEL SILENT for 6.0s - triggering auto-restart
  ‚Üí Accel already alive (concurrent restart won)
  ‚úì Accel restarted, resuming data collection

‚ö†Ô∏è GPS SILENT for 30.9s - triggering auto-restart
  ‚Üí GPS already alive (concurrent restart won)
  ‚úì GPS restarted, resuming data collection

‚ö†Ô∏è ACCEL SILENT for 6.0s - triggering auto-restart
  ‚Üí Accel already alive (concurrent restart won)
  ‚úì Accel restarted, resuming data collection

‚ö†Ô∏è ACCEL SILENT for 6.0s - triggering auto-restart
  ‚Üí Accel already alive (concurrent restart won)
  ‚úì Accel restarted, resuming data collection
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 

‚ö†Ô∏è ACCEL SILENT for 6.0s - triggering auto-restart
  ‚Üí Accel already alive (concurrent restart won)
  ‚úì Accel restarted, resuming data collection
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 
[GyroDaemon] Output queue error: 

‚ö†Ô∏è ACCEL SILENT for 6.0s - triggering auto-restart
  ‚Üí Accel already alive (concurrent restart won)
  ‚úì Accel restarted, resuming data collection

[DEBUG] Loop exited after 63.7s. Stop event: False, Time check: False
[GyroDaemon] Output queue error: 

Configuration:
  Duration: 1 minutes
  Gyroscope: Enabled

Starting in 2 seconds...

====================================================================================================
REAL-TIME FILTER COMPARISON: EKF vs Complementary
====================================================================================================

‚úì Initializing sensor (brief pause for cleanup)...
‚úì Accelerometer daemon started (20Hz, paired IMU stream)
   Sensors: Accel + Gyro (paired from LSM6DSO chip)
   Process: termux-sensor (PID 27374)

‚úì Accelerometer daemon started

‚úì Validating sensor startup (waiting up to 10 seconds for accelerometer data)...
  [REQUIRED] Waiting for accelerometer samples...
  ‚úì Accelerometer responding with data on attempt 1

‚úì Calibrating accelerometer (collecting 20 stationary samples)...
  ‚úì Gravity calibrated: 9.87 m/s¬≤
    (collected 20 samples, range: 9.86-9.88)

‚úì EKF filter initialized
‚úì Complementary filter initialized

‚úì Starting GPS daemon (continuous polling)...
  ‚úì GPS daemon started (polling termux-location continuously)
  ‚è± Waiting for first GPS fix (up to 30 seconds)...
  Waiting for GPS... (1.0s)
  ‚úì GPS lock acquired: 32.2160, -110.8434 (latency: 1.6s)
  ‚úì First GPS fix processed and added to test data

‚úì Initializing gyroscope (optional, will fallback if unavailable)...
‚úì Gyroscope daemon started (shared IMU stream)
   Sensor: lsm6dso LSM6DSO Gyroscope Non-wakeup (paired)
   Source: Shared with Accelerometer daemon (same hardware)
  ‚úì Gyroscope daemon started (using shared IMU stream)
  Note: Gyroscope data will be collected during test run

‚úì Running for 1 minutes...

[00:03] 13D GYRO-EKF METRICS
===========================================================================
Bias Magnitude:      0.000000 rad/s  [‚è≥ Learning...]
  ‚îî‚îÄ Stability (œÉ):  0.000000 rad/s

Quaternion Norm:     1.000000  [‚úì HEALTHY]
  ‚îî‚îÄ Error:          0.000000

Gyro Residual:       0.000341 rad/s
  ‚îî‚îÄ Std Dev:        0.000000 rad/s

Incident Detection:
  Hard Braking:        0 events
  Swerving:            0 events

Overall Status:      ‚úì HEALTHY
===========================================================================

‚úì Auto-saving data (1 GPS, 31 accel samples)...
‚úì Auto-saved (autosave #1): /data/data/com.termux/files/home/gojo/motion_tracker_v2/../motion_tracker_sessions/comparison_20251111_221559.json.gz | Total: 1 GPS + 31 accel | Deques cleared

‚úì Auto-saving data (0 GPS, 0 accel samples)...
‚úì Auto-saved (autosave #2): /data/data/com.termux/files/home/gojo/motion_tracker_v2/../motion_tracker_sessions/comparison_20251111_221559.json.gz | Total: 1 GPS + 31 accel | Deques cleared

‚úì Auto-saving data (0 GPS, 0 accel samples)...
‚úì Auto-saved (autosave #3): /data/data/com.termux/files/home/gojo/motion_tracker_v2/../motion_tracker_sessions/comparison_20251111_221559.json.gz | Total: 1 GPS + 31 accel | Deques cleared

‚úì Auto-saving data (0 GPS, 0 accel samples)...
‚úì Auto-saved (autosave #4): /data/data/com.termux/files/home/gojo/motion_tracker_v2/../motion_tracker_sessions/comparison_20251111_221559.json.gz | Total: 1 GPS + 31 accel | Deques cleared

‚úì Final save data assembly:
  Accumulated GPS: 1
  Current deque GPS: 0
  Final GPS: 1
  Accumulated Accel: 31
  Current deque Accel: 0
  Final Accel: 31
‚úì Validation metrics saved to: /data/data/com.termux/files/home/gojo/motion_tracker_v2/../motion_tracker_sessions/metrics_20251111_221559.json

‚úì Final results saved:
  /data/data/com.termux/files/home/gojo/motion_tracker_v2/../motion_tracker_sessions/comparison_20251111_221559.json
  /data/data/com.termux/files/home/gojo/motion_tracker_v2/../motion_tracker_sessions/comparison_20251111_221559.json.gz
‚úì Peak memory usage: 92.5 MB
‚úì Multi-track GPX saved: /data/data/com.termux/files/home/gojo/motion_tracker_v2/../motion_tracker_sessions/comparison_20251111_221559.gpx

====================================================================================================
FINAL COMPARISON SUMMARY
====================================================================================================

Final Velocities:
  EKF:           0.000 m/s
  Complementary: 0.000 m/s

Gyroscope: Enabled but NO samples collected

====================================================================================================

[1;33mTest finished, performing final cleanup...[0m
[1;33mReleasing wakelock...[0m
[0;32m‚úì Wakelock released[0m
[1;33mCleaning up sensor processes...[0m
[0;32m‚úì Sensor cleanup complete[0m
[0;32m‚úì Test completed successfully[0m
